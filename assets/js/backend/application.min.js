class SveaCheckout{constructor(){this.statusButtonSelector="#sco-check-svea-status",this.checkStatusBtn=null,this.closeServerViolationMessageSelector="#sco-server-violation-error-message",this.closeServerViolationMessageBtn=null,this.addEventListeners()}static setup(){return new SveaCheckout}addEventListeners(){this.checkStatusBtn=document.querySelector(this.statusButtonSelector),this.closeServerViolationMessageBtn=document.querySelector(this.closeServerViolationMessageSelector),this.checkStatusBtn&&this.checkStatusBtn.addEventListener("click",this.fetchStatus.bind(this)),this.closeServerViolationMessageBtn&&this.closeServerViolationMessageBtn.addEventListener("click",this.closeServerViolationMessage.bind(this))}closeServerViolationMessage(e){if("BUTTON"===e.target.tagName){const e=new FormData;e.append("action","sco-dismiss-server-violation-message"),e.append("security",window.wc_sco_params.security);const t={method:"POST",body:e};fetch(window.ajaxurl,t)}}fetchStatus(e){e.preventDefault();const t=this.$btn.innerHTML,s=this.$btn.getAttribute("data-loading-text");this.$btn.innerHTML=s,this.$btn.setAttribute("disabled","disabled");const a={security:wc_sco_params.security,action:"sco-check-order-status",order_id:wc_sco_params.order_id},o=new URLSearchParams(a),i=window.ajaxurl+"?"+o.toString();fetch(i).then((e=>e.json())).then((e=>{alert(this.decodeHtml(e.data)),this.$btn.innerHTML=t,this.$btn.removeAttribute("disabled")}))}decodeHtml(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value}}function sveaCheckoutDomReady(){SveaCheckout.setup()}"complete"===document.readyState||"interactive"===document.readyState?sveaCheckoutDomReady():document.addEventListener("DOMContentLoaded",sveaCheckoutDomReady);